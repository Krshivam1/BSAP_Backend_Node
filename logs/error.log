{"level":"error","message":"Unable to start server: Failed to open the referenced table 'states'","name":"SequelizeDatabaseError","original":{"code":"ER_FK_CANNOT_OPEN_PARENT","errno":1824,"sql":"CREATE TABLE IF NOT EXISTS `user` (`id` INTEGER auto_increment , `state_id` INTEGER, `range_id` INTEGER, `district_id` INTEGER, `first_name` VARCHAR(255), `last_name` VARCHAR(255), `email` VARCHAR(255) UNIQUE, `mobile_no` VARCHAR(255), `contact_no` VARCHAR(255), `user_image` VARCHAR(255), `password` VARCHAR(255) NOT NULL, `is_first` TINYINT(1) DEFAULT true, `joining_date` VARCHAR(255), `end_date` VARCHAR(255), `number_subdivision` INTEGER, `number_cirlce` INTEGER, `number_ps` INTEGER, `number_op` INTEGER, `token` TEXT, `token_validity` DATETIME, `role_id` INTEGER, `otp` VARCHAR(255), `otp_validity` DATETIME, `verified` TINYINT(1) DEFAULT false, `created_by` INTEGER, `updated_by` INTEGER, `active` TINYINT(1) DEFAULT true, `created_date` DATETIME NOT NULL, `updated_date` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`state_id`) REFERENCES `states` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`range_id`) REFERENCES `ranges` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`district_id`) REFERENCES `districts` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;","sqlMessage":"Failed to open the referenced table 'states'","sqlState":"HY000"},"parameters":{},"parent":{"code":"ER_FK_CANNOT_OPEN_PARENT","errno":1824,"sql":"CREATE TABLE IF NOT EXISTS `user` (`id` INTEGER auto_increment , `state_id` INTEGER, `range_id` INTEGER, `district_id` INTEGER, `first_name` VARCHAR(255), `last_name` VARCHAR(255), `email` VARCHAR(255) UNIQUE, `mobile_no` VARCHAR(255), `contact_no` VARCHAR(255), `user_image` VARCHAR(255), `password` VARCHAR(255) NOT NULL, `is_first` TINYINT(1) DEFAULT true, `joining_date` VARCHAR(255), `end_date` VARCHAR(255), `number_subdivision` INTEGER, `number_cirlce` INTEGER, `number_ps` INTEGER, `number_op` INTEGER, `token` TEXT, `token_validity` DATETIME, `role_id` INTEGER, `otp` VARCHAR(255), `otp_validity` DATETIME, `verified` TINYINT(1) DEFAULT false, `created_by` INTEGER, `updated_by` INTEGER, `active` TINYINT(1) DEFAULT true, `created_date` DATETIME NOT NULL, `updated_date` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`state_id`) REFERENCES `states` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`range_id`) REFERENCES `ranges` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`district_id`) REFERENCES `districts` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;","sqlMessage":"Failed to open the referenced table 'states'","sqlState":"HY000"},"service":"performance-statistics-api","sql":"CREATE TABLE IF NOT EXISTS `user` (`id` INTEGER auto_increment , `state_id` INTEGER, `range_id` INTEGER, `district_id` INTEGER, `first_name` VARCHAR(255), `last_name` VARCHAR(255), `email` VARCHAR(255) UNIQUE, `mobile_no` VARCHAR(255), `contact_no` VARCHAR(255), `user_image` VARCHAR(255), `password` VARCHAR(255) NOT NULL, `is_first` TINYINT(1) DEFAULT true, `joining_date` VARCHAR(255), `end_date` VARCHAR(255), `number_subdivision` INTEGER, `number_cirlce` INTEGER, `number_ps` INTEGER, `number_op` INTEGER, `token` TEXT, `token_validity` DATETIME, `role_id` INTEGER, `otp` VARCHAR(255), `otp_validity` DATETIME, `verified` TINYINT(1) DEFAULT false, `created_by` INTEGER, `updated_by` INTEGER, `active` TINYINT(1) DEFAULT true, `created_date` DATETIME NOT NULL, `updated_date` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`state_id`) REFERENCES `states` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`range_id`) REFERENCES `ranges` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`district_id`) REFERENCES `districts` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;","stack":"Error\n    at Query.run (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.createTable (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:98:12)\n    at async User.sync (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\model.js:942:7)\n    at async Sequelize.sync (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\sequelize.js:377:9)\n    at async startServer (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\app.js:102:7)","timestamp":"2025-09-16 14:16:37"}
{"level":"error","message":"Unable to start server: Failed to open the referenced table 'states'","name":"SequelizeDatabaseError","original":{"code":"ER_FK_CANNOT_OPEN_PARENT","errno":1824,"sql":"CREATE TABLE IF NOT EXISTS `user` (`id` INTEGER auto_increment , `state_id` INTEGER, `range_id` INTEGER, `district_id` INTEGER, `first_name` VARCHAR(255), `last_name` VARCHAR(255), `email` VARCHAR(255) UNIQUE, `mobile_no` VARCHAR(255), `contact_no` VARCHAR(255), `user_image` VARCHAR(255), `password` VARCHAR(255) NOT NULL, `is_first` TINYINT(1) DEFAULT true, `joining_date` VARCHAR(255), `end_date` VARCHAR(255), `number_subdivision` INTEGER, `number_cirlce` INTEGER, `number_ps` INTEGER, `number_op` INTEGER, `token` TEXT, `token_validity` DATETIME, `role_id` INTEGER, `otp` VARCHAR(255), `otp_validity` DATETIME, `verified` TINYINT(1) DEFAULT false, `created_by` INTEGER, `updated_by` INTEGER, `active` TINYINT(1) DEFAULT true, `created_date` DATETIME NOT NULL, `updated_date` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`state_id`) REFERENCES `states` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`range_id`) REFERENCES `ranges` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`district_id`) REFERENCES `districts` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;","sqlMessage":"Failed to open the referenced table 'states'","sqlState":"HY000"},"parameters":{},"parent":{"code":"ER_FK_CANNOT_OPEN_PARENT","errno":1824,"sql":"CREATE TABLE IF NOT EXISTS `user` (`id` INTEGER auto_increment , `state_id` INTEGER, `range_id` INTEGER, `district_id` INTEGER, `first_name` VARCHAR(255), `last_name` VARCHAR(255), `email` VARCHAR(255) UNIQUE, `mobile_no` VARCHAR(255), `contact_no` VARCHAR(255), `user_image` VARCHAR(255), `password` VARCHAR(255) NOT NULL, `is_first` TINYINT(1) DEFAULT true, `joining_date` VARCHAR(255), `end_date` VARCHAR(255), `number_subdivision` INTEGER, `number_cirlce` INTEGER, `number_ps` INTEGER, `number_op` INTEGER, `token` TEXT, `token_validity` DATETIME, `role_id` INTEGER, `otp` VARCHAR(255), `otp_validity` DATETIME, `verified` TINYINT(1) DEFAULT false, `created_by` INTEGER, `updated_by` INTEGER, `active` TINYINT(1) DEFAULT true, `created_date` DATETIME NOT NULL, `updated_date` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`state_id`) REFERENCES `states` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`range_id`) REFERENCES `ranges` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`district_id`) REFERENCES `districts` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;","sqlMessage":"Failed to open the referenced table 'states'","sqlState":"HY000"},"service":"performance-statistics-api","sql":"CREATE TABLE IF NOT EXISTS `user` (`id` INTEGER auto_increment , `state_id` INTEGER, `range_id` INTEGER, `district_id` INTEGER, `first_name` VARCHAR(255), `last_name` VARCHAR(255), `email` VARCHAR(255) UNIQUE, `mobile_no` VARCHAR(255), `contact_no` VARCHAR(255), `user_image` VARCHAR(255), `password` VARCHAR(255) NOT NULL, `is_first` TINYINT(1) DEFAULT true, `joining_date` VARCHAR(255), `end_date` VARCHAR(255), `number_subdivision` INTEGER, `number_cirlce` INTEGER, `number_ps` INTEGER, `number_op` INTEGER, `token` TEXT, `token_validity` DATETIME, `role_id` INTEGER, `otp` VARCHAR(255), `otp_validity` DATETIME, `verified` TINYINT(1) DEFAULT false, `created_by` INTEGER, `updated_by` INTEGER, `active` TINYINT(1) DEFAULT true, `created_date` DATETIME NOT NULL, `updated_date` DATETIME NOT NULL, PRIMARY KEY (`id`), FOREIGN KEY (`state_id`) REFERENCES `states` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`range_id`) REFERENCES `ranges` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`district_id`) REFERENCES `districts` (`id`) ON DELETE SET NULL ON UPDATE CASCADE, FOREIGN KEY (`role_id`) REFERENCES `roles` (`id`) ON DELETE SET NULL ON UPDATE CASCADE) ENGINE=InnoDB;","stack":"Error\n    at Query.run (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async MySQLQueryInterface.createTable (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\dialects\\abstract\\query-interface.js:98:12)\n    at async User.sync (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\model.js:942:7)\n    at async Sequelize.sync (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\sequelize.js:377:9)\n    at async startServer (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\app.js:102:7)","timestamp":"2025-09-16 14:44:43"}
{"level":"error","message":"Login error: Cannot access 'user' before initialization","service":"performance-statistics-api","stack":"ReferenceError: Cannot access 'user' before initialization\n    at G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\src\\routes\\authRoutes.js:41:18\n    at Layer.handle [as handle_request] (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-16 17:52:28"}
{"ip":"::1","level":"error","message":"Application Error Cannot access 'user' before initialization","method":"POST","requestBody":{"email":"mocsoft@gmail.com","password":"[REDACTED]"},"stack":"ReferenceError: Cannot access 'user' before initialization\n    at G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\src\\routes\\authRoutes.js:41:18\n    at Layer.handle [as handle_request] (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-16T12:22:28.051Z","url":"/api/auth/login","userAgent":"PostmanRuntime/7.46.0"}
{"level":"error","message":"Database test error: Cannot read properties of undefined (reading 'query')","service":"performance-statistics-api","stack":"TypeError: Cannot read properties of undefined (reading 'query')\n    at G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\src\\routes\\authRoutes.js:44:51\n    at Layer.handle [as handle_request] (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at middleware (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\express-validator\\lib\\middlewares\\check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-09-16 17:55:41"}
{"level":"error","message":"Database test error: Table 'performance_statistics.users' doesn't exist","name":"SequelizeDatabaseError","original":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"SELECT COUNT(*) as userCount FROM users WHERE active = 1","sqlMessage":"Table 'performance_statistics.users' doesn't exist","sqlState":"42S02"},"parameters":{},"parent":{"code":"ER_NO_SUCH_TABLE","errno":1146,"sql":"SELECT COUNT(*) as userCount FROM users WHERE active = 1","sqlMessage":"Table 'performance_statistics.users' doesn't exist","sqlState":"42S02"},"service":"performance-statistics-api","sql":"SELECT COUNT(*) as userCount FROM users WHERE active = 1","stack":"Error\n    at Query.run (G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\dialects\\mysql\\query.js:52:25)\n    at G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\node_modules\\sequelize\\lib\\sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async G:\\MocSoft\\BSAP\\Darpan\\performancestatistics-nodejs\\src\\routes\\authRoutes.js:44:35","timestamp":"2025-09-16 17:57:13"}
